# 구현 계획

- [x] 1. Windows 환경 검증 및 설정 모듈 구현

  - Windows 10/11 Pro 및 VMware Workstation Pro 설치 상태 확인 기능 구현
  - 관리자 권한, 메모리, 디스크 공간 검증 로직 작성
  - WSL2 Ubuntu 22.04 LTS 설치 상태 확인 기능 구현
  - VMware 네트워크(VMnet1) 설정 검증 기능 구현
  - _요구사항: 1.1, 1.2, 1.3_

- [x] 2. 오프라인 환경 준비 시스템 구현

  - Docker 레지스트리 자동 시작 및 설정 기능 구현
  - 26개 필수 컨테이너 이미지 자동 미러링 시스템 구현
  - k3s v1.33.4-rc1+k3s1 바이너리 및 에어갭 이미지 다운로드 기능 구현
  - SSH 키 쌍, TLS 인증서(SAN 포함), registries.yaml 자동 생성 기능 구현
  - _요구사항: 2.1, 2.2, 2.3, 2.4_

- [x] 3. Ubuntu Seed ISO 생성 시스템 구현

  - Ubuntu 22.04.5 LTS 기반 cloud-init 자동 설치 ISO 생성 기능 구현
  - GRUB 설정 및 autoinstall 파라미터 자동 주입 기능 구현
  - 운영 패키지(jq, htop, ethtool 등) 자동 포함 시스템 구현
  - cloud-init 템플릿 통합 및 변수 치환 기능 구현
  - _요구사항: 3.1, 3.3_

- [x] 4. VMware VM 자동 생성 및 관리 시스템 구현

  - 1개 마스터 노드(192.168.6.10)와 2개 워커 노드(192.168.6.11, 192.168.6.12) 자동 생성 기능 구현
  - vmrun 명령어 실행 및 게스트 상태 모니터링 시스템 구현
  - SSH 폴백 메커니즘 및 완료 상태 판정 로직 구현
  - ISO 자동 연결/해제 및 부팅 순서 설정 기능 구현
  - _요구사항: 3.2, 7.1, 7.4_

- [x] 5. Cloud-init 자동화 및 SSH 보안 설정 구현

  - SSH 키 기반 인증 설정 및 패스워드 인증 비활성화 기능 구현
  - 루트 로그인 비활성화 및 보안 강화 설정 구현
  - cloud-init idempotency 보장을 위한 완료 표시 파일 시스템 구현
  - 시스템 패키지 자동 설치 및 설정 기능 구현
  - _요구사항: 3.4, 7.2, 7.3_

- [x] 6. k3s 클러스터 자동 구성 시스템 구현

  - 마스터 노드 k3s 서버 자동 시작 및 클러스터 초기화 기능 구현
  - 워커 노드 자동 조인 및 클러스터 확장 기능 구현
  - TLS SAN 설정 및 API 서버 인증서 구성 기능 구현
  - k3s 기본 컴포넌트(Traefik, ServiceLB, CoreDNS 등) 활성화 구현
  - _요구사항: 4.1, 4.2_

- [x] 7. KubeSphere 자동 배포 시스템 구현

  - KubeSphere v4.1.3 컴포넌트 자동 배포 기능 구현
  - 웹 콘솔(http://192.168.6.10:30880) 접근 설정 구현
  - 모니터링 및 로깅 컴포넌트 자동 설치 기능 구현
  - KubeSphere 초기 설정 및 관리자 계정 구성 구현
  - _요구사항: 4.3, 4.4_

- [x] 8. WSL kubectl 자동 설정 시스템 구현

  - VM SSH 연결 및 k3s 서비스 상태 자동 점검 기능 구현
  - kubeconfig 파일 자동 다운로드 및 서버 주소 수정 기능 구현
  - TLS 인증서 문제 자동 해결 및 CA 인증서 설정 기능 구현
  - WSL kubectl 접속 테스트 및 검증 시스템 구현
  - _요구사항: 5.1, 5.2, 5.3, 5.4_

- [x] 9. 시간 동기화 및 TLS 오류 방지 시스템 구현

  - sync-time.service 구현 및 WSL 레지스트리 HTTP Date 헤더 동기화 기능 구현
  - build-timestamp 폴백 메커니즘 및 하드웨어 클록 저장 기능 구현
  - k3s 서비스 의존성 설정 및 시간 동기화 후 실행 보장 구현
  - 수동 시간 동기화 스크립트 및 진단 도구 구현
  - _요구사항: 6.1, 6.2, 6.3, 6.4_

- [x] 10. 네트워크 및 레지스트리 접근 시스템 구현

  - Windows 포트 포워딩 자동 설정 및 WSL2-VM 네트워크 연결 기능 구현
  - TLS SAN 포함 인증서 생성 및 https://192.168.6.1:5000 접속 보장 구현
  - registries.yaml 자동 생성 및 배포 시스템 구현
  - 레지스트리 카탈로그 조회 및 미러링된 이미지 목록 관리 기능 구현
  - _요구사항: 8.1, 8.2, 8.3, 8.4_

- [x] 11. 오류 처리 및 복구 시스템 구현

  - 환경 검증 실패 시 상세 오류 메시지 및 해결 방안 제시 기능 구현
  - 네트워크 연결 실패 시 폴백 메커니즘 및 자동 복구 기능 구현
  - vmrun 명령 실패 시 SSH 폴백 및 대체 실행 경로 구현
  - 다단계 시간 동기화 폴백 및 오류 상황 대응 시스템 구현
  - _설계: 오류 처리 섹션_

- [ ] 12. 테스트 자동화 시스템 구현
  - PowerShell 및 Bash 스크립트 단위 테스트 프레임워크 구현
  - 전체 워크플로우 E2E 테스트 시나리오 구현
  - 리소스 사용량 및 네트워크 성능 모니터링 테스트 구현
  - SSH 키 인증 및 TLS 인증서 보안 테스트 구현
  - _설계: 테스트 전략 섹션_

- [x] 13. 모니터링 및 로깅 시스템 구현

  - VM 상태 및 k3s 서비스 상태 실시간 모니터링 기능 구현
  - 레지스트리 접근성 및 시간 동기화 상태 모니터링 구현
  - 상세 로그 수집 및 문제 진단 도구 구현
  - 시스템 건강 상태 체크 및 알림 기능 구현
  - _설계: 배포 및 운영 고려사항_

- [ ] 14. 백업 및 복구 시스템 구현
  - VM 스냅샷 자동 생성 및 관리 기능 구현
  - 설정 파일, SSH 키, 인증서 자동 백업 시스템 구현
  - 레지스트리 데이터 백업 및 복원 기능 구현
  - 전체 환경 복구 및 재구축 자동화 스크립트 구현
  - _설계: 배포 및 운영 고려사항_

- [x] 15. 사용자 문서 및 가이드 작성

  - 설치 및 설정 단계별 가이드 문서 작성
  - 문제 해결 및 트러블슈팅 가이드 작성
  - 고급 사용법 및 커스터마이징 가이드 작성
  - API 참조 문서 및 스크립트 사용법 문서 작성
  - _전체 요구사항 지원_

- [x] 16. 성능 최적화 및 안정성 개선


  - VM 생성 시간 단축 및 리소스 사용량 최적화 구현
  - 네트워크 통신 성능 개선 및 타임아웃 최적화 구현
  - 메모리 사용량 최적화 및 가비지 컬렉션 개선 구현
  - 안정성 향상을 위한 재시도 로직 및 예외 처리 강화 구현
  - _설계: 성능 테스트 섹션_