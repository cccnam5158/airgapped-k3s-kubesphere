# 250901 K3s 부트스트랩 문제 진단 및 수정

## 문제 상황
- 마스터 1에서 `check-cloud-init-status.sh` 실행 결과
- Cloud-init는 정상 완료됨
- K3s 바이너리가 설치되지 않음
- K3s 부트스트랩 관련 완료 표시 파일들이 생성되지 않음

## 확인 사항
1. ✅ K3s 설치 스크립트 존재 확인: `/usr/local/bin/setup-k3s-master.sh` (4378 bytes)
2. ✅ K3s 설치 스크립트 실행 여부 - 부분적으로 실행됨 (로그 시작만 있음)
3. ✅ K3s 설치 로그 확인 - 매우 짧음 (2줄만)
4. ✅ 부트스트랩 프로세스 상태 점검 - 서비스 비활성, K3s 서비스 없음
5. ✅ 문제 해결 완료

## 진단 결과
- **시드 파일**: 정상적으로 존재 (`/usr/local/seed/k3s`, `k3s-airgap-images-amd64.tar.gz` 등)
- **부트스트랩 로그**: 2줄만 기록되고 중단됨
- **부트스트랩 서비스**: 비활성 상태
- **K3s 서비스**: 생성되지 않음
- **문제 원인**: `setup-k3s-master.sh` 스크립트의 `${DOLLAR}{SEED_BASE}` 변수 처리 문제

## 해결 방법
1. **SRC 변수 설정 개선**: `if` 문을 여러 줄로 분리하여 가독성 향상
2. **디버깅 로그 추가**: `echo "Installing K3s binary from: ${SRC}"` 추가
3. **SEED_BASE 검증**: 변수 설정 후 유효성 검사 추가
4. **시드 내용 표시**: `ls -la "${SEED_BASE}/"` 추가로 디버깅 정보 제공

## 작업 내용
- [x] K3s 설치 스크립트 존재 확인
- [x] K3s 설치 상태 상세 진단
- [x] 설치 로그 분석
- [x] 부트스트랩 스크립트 수정 및 개선
- [x] 문제 해결 및 검증

## 상태
- ✅ 완료
